{
    "scenarioName": "confirm worker startup",
    "actions": [
        {
            "actionType": "rpc",
            "actionName": "validate the worker's ability to send a StartStream message",
            "timeout": 120000,
            "messages": [
                {
                    "direction": "incoming",
                    "messageType": "StartStream",
                    "validators": [
                        {
                            "type": "regex",
                            "query": "$.StartStream.WorkerId",
                            "expected": ".+"
                        }
                    ]
                }
            ]
        },
        {
            "actionType": "rpc",
            "actionName": "validate that worker advertises the EnableUserCodeException capability in the WorkerInitResponse message",
            "messages": [
                {
                    "direction": "outgoing",
                    "messageType": "WorkerInitRequest",
                    "payload": {}
                },
                {
                    "direction": "incoming",
                    "messageType": "WorkerInitResponse",
                    "validators": [
                        {
                            "type": "string",
                            "query": "$.WorkerInitResponse.Result.Status",
                            "expected": "Success"
                        },
                        {
                            "type": "string",
                            "query": "$.WorkerInitResponse.Capabilities.EnableUserCodeException",
                            "expected": "True"
                        }
                    ]
                }
            ]
        }
    ]
}